<div
	*ngIf="this._stream"
	class="OT_widget-container no-size"
	[id]="'container-' + this._stream.streamManager?.stream?.streamId"
	#streamContainer
>
	<div class="nickname" [class.fullscreen]="isFullscreen" *ngIf="showNickname">
		<div (click)="toggleNicknameForm()" class="nicknameContainer" selected *ngIf="!toggleNickname">
			<span id="nickname">{{ this._stream.nickname }}</span>
			<span *ngIf="_stream.local || (_stream.streamManager && !_stream.streamManager?.remote)"> (edit)</span>
		</div>
		<div *ngIf="toggleNickname && !this._stream.streamManager?.remote" [class.fullscreen]="isFullscreen" id="dialogNickname">
			<form id="nicknameForm">
				<mat-form-field color="primary">
					<input
						matInput
						#nicknameInput
						placeholder="Nick: {{ this._stream.nickname }}"
						[formControl]="nicknameFormControl"
						[errorStateMatcher]="matcher"
						(keypress)="eventKeyPress($event)"
						autocomplete="off"
						(focusout)="toggleNicknameForm()"
					/>
					<mat-error *ngIf="nicknameFormControl.hasError('required')"> Nickname is <strong>required</strong> </mat-error>
					<mat-error *ngIf="nicknameFormControl.hasError('maxlength')"> Nickname is <strong>too long!</strong> </mat-error>
				</mat-form-field>
			</form>
		</div>
	</div>

	<div id="audio-wave-container" *ngIf="showAudioDetection && _stream.type === 'CAMERA'">
		<ov-audio-wave [streamManager]="_stream.streamManager"></ov-audio-wave>
	</div>

	<ov-video
		(dblclick)="toggleVideoEnlarged()"
		[streamManager]="_stream.streamManager"
		[mutedSound]="_stream.participant.isMutedForcibly"
	></ov-video>


	<div class="status-icons">

		<button mat-icon-button id="statusMic" *ngIf="!this._stream.streamManager?.stream?.audioActive" disabled>
			<mat-icon>mic_off</mat-icon>
		</button>
	</div>

	<div class="videoButtons" *ngIf="showSettings">

		<button mat-icon-button (click)="toggleVideoMenu($event)" matTooltip="Settings" aria-label="Video settings menu">
			<mat-icon>more_vert</mat-icon>
		</button>
		<span [matMenuTriggerFor]="menu"></span>
		<mat-menu #menu="matMenu" yPosition="above" xPosition="before">
			<button mat-menu-item id="videoZoomButton" (click)="toggleVideoEnlarged()">
				<mat-icon>{{ this.videoSizeIcon }}</mat-icon>
				<span *ngIf="videoSizeIcon === videoSizeIconEnum.NORMAL">Zoom out</span>
				<span *ngIf="videoSizeIcon === videoSizeIconEnum.BIG">Zoom in</span>
			</button>
			<button mat-menu-item id="volumeButton" *ngIf="!this._stream.local" (click)="toggleSound()">
				<mat-icon *ngIf="!_stream.participant.isMutedForcibly">volume_up</mat-icon>
				<span *ngIf="!_stream.participant.isMutedForcibly">Mute sound</span>

				<mat-icon *ngIf="_stream.participant.isMutedForcibly">volume_off</mat-icon>
				<span *ngIf="_stream.participant.isMutedForcibly">Unmute sound</span>
			</button>
			<!-- <button mat-menu-item *ngIf="this._stream.streamManager?.stream?.videoActive" id="fullscreenButton" (click)="toggleFullscreen()">
				<mat-icon *ngIf="!isFullscreenEnabled">fullscreen</mat-icon>
				<span *ngIf="!isFullscreenEnabled">Fullscreen</span>

				<mat-icon *ngIf="isFullscreenEnabled">fullscreen_exit</mat-icon>
				<span *ngIf="isFullscreenEnabled">Exit fullscreen</span>
			</button> -->

			<button
				mat-menu-item
				(click)="replaceScreenTrack()"
				id="changeScreenButton"
				*ngIf="!this._stream.streamManager?.remote && this._stream.streamManager?.stream?.typeOfVideo === videoTypeEnum.SCREEN"
			>
				<mat-icon>picture_in_picture</mat-icon>
				<span>Replace screen</span>
			</button>
		</mat-menu>
	</div>
</div>
